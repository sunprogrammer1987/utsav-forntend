<div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
  <div class="flex justify-between items-center mb-4 flex-wrap gap-2">
    <h2 class="text-xl font-semibold">Categories</h2>

    <div class="flex items-center gap-3 flex-wrap">     
      <button mat-flat-button color="primary" (click)="openForm()">+ Add Category</button>
      <button mat-stroked-button color="accent" routerLink="/categories/tree">
        <mat-icon>account_tree</mat-icon>
        View Tree
      </button>
    </div>
  </div>

  <!-- Table (unchanged) -->
  <mat-table [dataSource]="categories" *ngIf="!loading">
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
      <mat-cell *matCellDef="let cat">{{ cat.name }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="slug">
      <mat-header-cell *matHeaderCellDef>Slug</mat-header-cell>
      <mat-cell *matCellDef="let cat">{{ cat.slug }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="parent">
      <mat-header-cell *matHeaderCellDef>Parent</mat-header-cell>
      <mat-cell *matCellDef="let cat">{{ cat.parent?.name || '—' }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="vendor">
      <mat-header-cell *matHeaderCellDef>Vendor</mat-header-cell>
      <mat-cell *matCellDef="let cat">{{ cat.vendor?.shopName || '—' }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="store">
      <mat-header-cell *matHeaderCellDef>Store</mat-header-cell>
      <mat-cell *matCellDef="let cat">{{ cat.store?.name || '—' }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
      <mat-cell *matCellDef="let cat">
        <button mat-icon-button color="primary" (click)="openForm(cat)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="deleteCategory(cat._id)">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>

  <div *ngIf="loading" class="text-center py-6 text-gray-500">
    Loading categories...
  </div>
</div>
