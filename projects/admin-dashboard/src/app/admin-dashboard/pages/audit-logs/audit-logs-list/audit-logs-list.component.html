<div class="bg-white p-6 rounded shadow">
  <div class="flex items-center gap-3 mb-4">
    <mat-form-field appearance="outline" class="w-56">
      <mat-label>Action</mat-label>
      <input matInput [(ngModel)]="actionFilter" placeholder="e.g. Vendor Approved" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-56">
      <mat-label>Entity Type</mat-label>
      <input matInput [(ngModel)]="entityTypeFilter" placeholder="Vendor, Store, Product" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>From</mat-label>
      <input matInput [matDatepicker]="dp1" [(ngModel)]="fromDate" />
      <mat-datepicker-toggle matSuffix [for]="dp1"></mat-datepicker-toggle>
      <mat-datepicker #dp1></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>To</mat-label>
      <input matInput [matDatepicker]="dp2" [(ngModel)]="toDate" />
      <mat-datepicker-toggle matSuffix [for]="dp2"></mat-datepicker-toggle>
      <mat-datepicker #dp2></mat-datepicker>
    </mat-form-field>

    <button mat-stroked-button (click)="load(1)">Filter</button>
    <button mat-stroked-button (click)="clearFilters()">Clear</button>

    <span class="flex-1"></span>

    <!-- <button mat-stroked-button (click)="exportCSV()">Export CSV</button>
    <button mat-stroked-button (click)="exportPDF()">Export PDF</button> -->
  </div>

  <div *ngIf="loading" class="text-center py-8">
    <mat-progress-spinner diameter="40" mode="indeterminate"></mat-progress-spinner>
  </div>

  <table *ngIf="!loading && logs.length" mat-table [dataSource]="logs" class="w-full mat-elevation-z2">

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let l">{{ l.action }}</td>
    </ng-container>

    <ng-container matColumnDef="performedBy">
      <th mat-header-cell *matHeaderCellDef>By</th>
      <td mat-cell *matCellDef="let l">{{ l.performedBy?.email || l.performedBy?.name || '-' }}</td>
    </ng-container>

    <ng-container matColumnDef="entityType">
      <th mat-header-cell *matHeaderCellDef>Entity</th>
      <td mat-cell *matCellDef="let l">{{ l.entityType }}</td>
    </ng-container>

    <ng-container matColumnDef="entityId">
      <th mat-header-cell *matHeaderCellDef>Entity ID</th>
      <td mat-cell *matCellDef="let l">{{ l.entityId }}</td>
    </ng-container>

    <ng-container matColumnDef="details">
      <th mat-header-cell *matHeaderCellDef>Details</th>
      <td mat-cell *matCellDef="let l"><pre class="whitespace-pre-wrap text-xs">{{ l.details | json }}</pre></td>
    </ng-container>

    <ng-container matColumnDef="createdAt">
      <th mat-header-cell *matHeaderCellDef>When</th>
      <td mat-cell *matCellDef="let l">{{ l.createdAt | date:'medium' }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <div *ngIf="!loading && !logs.length" class="text-center py-6 text-gray-500">No logs found.</div>
</div>
